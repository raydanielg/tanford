import{k as T,d as w,r as f,u as k,c as r,a as C,e as o,h as F,w as L,f as e,j as i,o as a,t as d,F as M,l as $,s as z,i as g,v as m,y as O,n as j}from"./app-DH_IQWaf.js";import{_ as H}from"./AuthenticatedLayout-BKN0BniS.js";import"./ApplicationLogo-DhczJS8o.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"space-y-6"},G={key:0,class:"fixed top-16 right-6 z-50 max-w-xs bg-red-50 border border-red-200 text-red-800 text-[11px] rounded-xl shadow-sm px-3 py-2 flex items-start gap-2"},I={class:"text-[10px] leading-snug"},Y={class:"bg-white rounded-2xl border border-gray-100 p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},q={class:"flex items-center gap-3 text-[11px]"},J={class:"px-3 py-2 rounded-2xl bg-emerald-50 text-emerald-700 border border-emerald-100 flex items-center gap-2"},K={class:"font-semibold"},Q={class:"bg-white rounded-2xl border border-gray-100 p-5"},W={class:"overflow-x-auto"},X={class:"min-w-full text-xs text-left"},Z={class:"py-2.5 px-3"},ee={class:"flex flex-col"},te={class:"text-[12px] text-gray-900 font-medium line-clamp-1"},se={class:"text-[10px] text-gray-400"},le={class:"py-2.5 px-3"},oe={class:"h-10 w-16 bg-gray-50 border border-gray-100 rounded overflow-hidden flex items-center justify-center"},re=["src","alt"],ae={key:1,class:"text-[9px] text-gray-400"},de={class:"py-2.5 px-3 text-[11px] text-gray-600"},ne={class:"py-2.5 px-3 text-[11px] text-gray-600"},ie={class:"py-2.5 px-3"},ue={key:0,class:"material-icons text-[12px]"},pe={key:1,class:"material-icons text-[12px]"},xe={class:"py-2.5 px-3 text-[11px] text-gray-500 whitespace-nowrap"},be={class:"py-2.5 px-3 text-[11px] text-right"},ge={class:"inline-flex items-center gap-1"},me=["onClick"],ye=["onClick"],ce={key:0},fe={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},ve={class:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-5 max-h-[90vh] overflow-y-auto text-xs"},_e={class:"text-sm font-semibold text-gray-900 mb-2"},he={class:"space-y-3"},we={class:"grid grid-cols-2 gap-3"},ke={key:0,class:"mt-1 text-[10px] text-red-600"},Ce={key:1,class:"mt-2 flex items-center gap-2"},Me={class:"h-12 w-20 rounded border border-gray-200 overflow-hidden bg-gray-50 flex items-center justify-center"},je=["src"],De=["src"],Se={key:0,class:"mt-1 text-[10px] text-red-600"},Ve={class:"grid grid-cols-3 gap-3"},Be={key:0,class:"mt-1 text-[10px] text-red-600"},Ae={key:0,class:"mt-1 text-[10px] text-red-600"},Ue={key:0,class:"mt-1 text-[10px] text-red-600"},Ee={class:"flex items-center justify-between pt-1"},Ne={class:"flex items-center gap-2 text-[11px] text-gray-700"},Pe={class:"flex justify-end gap-2 mt-5 text-[11px]"},Te=["disabled"],Fe={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Le={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},$e={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},ze={class:"text-[11px] text-gray-500 mb-4"},Oe={class:"font-semibold"},He={class:"flex justify-end gap-2 text-[11px]"},Re=["disabled"],Ge={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Ke={__name:"Posts",props:{posts:{type:Array,default:()=>[]}},setup(v){const D=v,S=T(),h=w(()=>(S.props.errors||{}).post||null),p=f(null),b=f(!1),y=f(!1),c=f(!1),s=k({title:"",category:"",author_name:"",image_url:"",image:null,body_image:null,body_audio:null,body_video:null,excerpt:"",body:"",published:!1}),V=()=>{p.value=null,s.reset(),s.image=null,s.body_image=null,s.body_audio=null,s.body_video=null,s.published=!1,b.value=!0},B=()=>{s.post(route("admin.posts.store"),{preserveScroll:!0,onSuccess:()=>{b.value=!1,s.reset()}})},A=n=>{p.value=n,s.title=n.title,s.category=n.category||"",s.author_name=n.author_name||"",s.image_url=n.image_url||"",s.image=null,s.body_image=null,s.body_audio=null,s.body_video=null,s.excerpt=n.excerpt||"",s.body=n.body||"",s.published=!!n.published_at,y.value=!0},U=()=>{p.value&&s.post(route("admin.posts.update",p.value.id),{preserveScroll:!0,onSuccess:()=>{y.value=!1}})},_=k({}),E=n=>{p.value=n,c.value=!0},N=()=>{p.value&&_.post(route("admin.posts.destroy",p.value.id),{preserveScroll:!0,onSuccess:()=>{c.value=!1}})},P=w(()=>D.posts.length);return(n,t)=>(a(),r(M,null,[C(o(F),{title:"Blog Management"}),C(H,null,{default:L(()=>[e("div",R,[h.value?(a(),r("div",G,[t[14]||(t[14]=e("span",{class:"material-icons text-[14px] mt-[1px]"},"error_outline",-1)),e("div",null,[t[13]||(t[13]=e("p",{class:"font-semibold mb-0.5"},"Action failed",-1)),e("p",I,d(h.value),1)])])):i("",!0),e("div",Y,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-lg font-semibold text-gray-900"},"Blog Management"),e("p",{class:"text-[11px] text-gray-500 mt-1"},"Create, edit and publish posts for the public blog.")],-1)),e("div",q,[e("div",J,[t[15]||(t[15]=e("span",{class:"material-icons text-sm"},"article",-1)),e("span",K,d(P.value),1),t[16]||(t[16]=e("span",{class:"text-emerald-800/80"},"posts",-1))]),e("button",{type:"button",class:"inline-flex items-center gap-1 rounded-full bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white hover:bg-emerald-700",onClick:V},[...t[17]||(t[17]=[e("span",{class:"material-icons text-[13px]"},"add",-1),e("span",null,"New post",-1)])])])]),e("div",Q,[t[23]||(t[23]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-sm font-semibold text-gray-900"},"All posts"),e("p",{class:"text-[11px] text-gray-500"},"Manage titles, status and visibility.")],-1)),e("div",W,[e("table",X,[t[22]||(t[22]=e("thead",null,[e("tr",{class:"border-b border-gray-100 text-[11px] text-gray-500"},[e("th",{class:"py-2 px-3 font-medium"},"Title"),e("th",{class:"py-2 px-3 font-medium"},"Image"),e("th",{class:"py-2 px-3 font-medium"},"Category"),e("th",{class:"py-2 px-3 font-medium"},"Author"),e("th",{class:"py-2 px-3 font-medium"},"Status"),e("th",{class:"py-2 px-3 font-medium"},"Created"),e("th",{class:"py-2 px-3 font-medium text-right"},"Actions")])],-1)),e("tbody",null,[(a(!0),r(M,null,$(v.posts,l=>(a(),r("tr",{key:l.id,class:"border-b border-gray-50 hover:bg-gray-50/60"},[e("td",Z,[e("div",ee,[e("span",te,d(l.title),1),e("span",se,"/"+d(l.slug),1)])]),e("td",le,[e("div",oe,[l.image_url?(a(),r("img",{key:0,src:l.image_url,alt:l.title,class:"h-full w-full object-cover"},null,8,re)):(a(),r("span",ae,"No image"))])]),e("td",de,d(l.category||"General"),1),e("td",ne,d(l.author_name||"Admin"),1),e("td",ie,[e("span",{class:z(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold",l.published_at?"bg-emerald-50 text-emerald-700 border border-emerald-100":"bg-gray-50 text-gray-600 border border-gray-200"])},[l.published_at?(a(),r("span",ue,"visibility")):(a(),r("span",pe,"draft")),e("span",null,d(l.published_at?"Published":"Draft"),1)],2)]),e("td",xe,d(new Date(l.created_at).toLocaleDateString()),1),e("td",be,[e("div",ge,[e("button",{class:"px-2 py-1 rounded-full bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",onClick:x=>A(l)},[...t[19]||(t[19]=[e("span",{class:"material-icons text-[12px]"},"edit",-1),e("span",null,"Edit",-1)])],8,me),e("button",{class:"px-2 py-1 rounded-full bg-red-50 border border-red-100 text-red-600 hover:bg-red-100 flex items-center gap-1",onClick:x=>E(l)},[...t[20]||(t[20]=[e("span",{class:"material-icons text-[12px]"},"delete",-1),e("span",null,"Delete",-1)])],8,ye)])])]))),128)),v.posts.length?i("",!0):(a(),r("tr",ce,[...t[21]||(t[21]=[e("td",{colspan:"6",class:"py-6 text-center text-[11px] text-gray-500"}," No posts found. ",-1)])]))])])])]),b.value||y.value?(a(),r("div",fe,[e("div",ve,[e("h3",_e,d(b.value?"Create post":"Edit post"),1),t[35]||(t[35]=e("p",{class:"text-[11px] text-gray-500 mb-4"}," Manage the title, content and visibility of this blog post. ",-1)),e("div",he,[e("div",null,[t[24]||(t[24]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Title",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).title=l),type:"text",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[m,o(s).title]])]),e("div",we,[e("div",null,[t[25]||(t[25]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Category",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).category=l),type:"text",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[m,o(s).category]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Author",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>o(s).author_name=l),type:"text",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[m,o(s).author_name]])])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Featured image",-1)),e("input",{type:"file",accept:"image/*",class:"w-full text-[11px] text-gray-600",onChange:t[3]||(t[3]=l=>{var u;const x=((u=l.target.files)==null?void 0:u[0])??null;o(s).image=x})},null,32),o(s).errors.image?(a(),r("p",ke,d(o(s).errors.image),1)):i("",!0),o(s).image||o(s).image_url?(a(),r("div",Ce,[t[27]||(t[27]=e("span",{class:"text-[10px] text-gray-500"},"Preview:",-1)),e("div",Me,[o(s).image?(a(),r("img",{key:0,src:n.URL.createObjectURL(o(s).image),alt:"Preview",class:"h-full w-full object-cover"},null,8,je)):o(s).image_url?(a(),r("img",{key:1,src:o(s).image_url,alt:"Current image",class:"h-full w-full object-cover"},null,8,De)):i("",!0)])])):i("",!0)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Excerpt",-1)),g(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=l=>o(s).excerpt=l),rows:"2",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[m,o(s).excerpt]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Body (HTML supported)",-1)),g(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=l=>o(s).body=l),rows:"6",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500 font-mono",placeholder:"You can use basic HTML tags (p, strong, em, ul, img, audio, video, etc.)"},null,512),[[m,o(s).body]]),o(s).errors.body?(a(),r("p",Se,d(o(s).errors.body),1)):i("",!0)]),e("div",Ve,[e("div",null,[t[31]||(t[31]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Body image (optional)",-1)),e("input",{type:"file",accept:"image/*",class:"w-full text-[11px] text-gray-600",onChange:t[6]||(t[6]=l=>{var u;const x=((u=l.target.files)==null?void 0:u[0])??null;o(s).body_image=x})},null,32),o(s).errors.body_image?(a(),r("p",Be,d(o(s).errors.body_image),1)):i("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Body audio (mp3/wav)",-1)),e("input",{type:"file",accept:"audio/*",class:"w-full text-[11px] text-gray-600",onChange:t[7]||(t[7]=l=>{var u;const x=((u=l.target.files)==null?void 0:u[0])??null;o(s).body_audio=x})},null,32),o(s).errors.body_audio?(a(),r("p",Ae,d(o(s).errors.body_audio),1)):i("",!0)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block mb-1 text-gray-700 text-[11px]"},"Body video (mp4/webm)",-1)),e("input",{type:"file",accept:"video/*",class:"w-full text-[11px] text-gray-600",onChange:t[8]||(t[8]=l=>{var u;const x=((u=l.target.files)==null?void 0:u[0])??null;o(s).body_video=x})},null,32),o(s).errors.body_video?(a(),r("p",Ue,d(o(s).errors.body_video),1)):i("",!0)])]),e("div",Ee,[e("label",Ne,[g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>o(s).published=l),type:"checkbox",class:"rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"},null,512),[[O,o(s).published]]),t[34]||(t[34]=e("span",null,"Mark as published (visible on site)",-1))])])]),e("div",Pe,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",type:"button",onClick:t[10]||(t[10]=l=>b.value?b.value=!1:y.value=!1)}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",type:"button",disabled:o(s).processing,onClick:t[11]||(t[11]=l=>b.value?B():U())},[o(s).processing?(a(),r("span",Fe)):i("",!0),e("span",null,d(b.value?"Create post":"Save changes"),1)],8,Te)])])])):i("",!0),c.value&&p.value?(a(),r("div",Le,[e("div",$e,[t[39]||(t[39]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Delete post",-1)),e("p",ze,[t[36]||(t[36]=j(" Are you sure you want to permanently delete ",-1)),e("span",Oe,d(p.value.title),1),t[37]||(t[37]=j("? This action cannot be undone. ",-1))]),e("div",He,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",type:"button",onClick:t[12]||(t[12]=l=>c.value=!1)}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-red-600 text-white text-xs font-semibold hover:bg-red-700 flex items-center gap-2",type:"button",disabled:o(_).processing,onClick:N},[o(_).processing?(a(),r("span",Ge)):i("",!0),t[38]||(t[38]=e("span",null,"Delete",-1))],8,Re)])])])):i("",!0)])]),_:1})],64))}};export{Ke as default};
