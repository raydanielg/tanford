import{r as b,u as g,d as L,c as r,a as U,e as o,h as q,w as G,f as e,j as d,t as i,o as n,F as R,l as H,s as I,n as u,i as y,v as M,m as $}from"./app-hL4_knL0.js";import{_ as J}from"./AuthenticatedLayout-U-1KwDQ1.js";import"./ApplicationLogo-YbnwWeVH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"space-y-6"},Q={class:"bg-white rounded-2xl border border-gray-100 p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},W={class:"flex items-center gap-3 text-[11px]"},X={class:"px-3 py-2 rounded-2xl bg-emerald-50 text-emerald-700 border border-emerald-100 flex items-center gap-2"},Y={class:"font-semibold"},Z={class:"bg-white rounded-2xl border border-gray-100 p-5"},ee={class:"overflow-x-auto"},te={class:"min-w-full text-xs text-left"},se={class:"py-2.5 px-3"},oe={class:"flex items-center gap-2"},le={class:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-emerald-50 text-[11px] font-semibold text-emerald-700"},re={class:"text-[12px] text-gray-900 font-medium"},ne={class:"py-2.5 px-3 text-[11px] text-gray-600"},ae={class:"py-2.5 px-3"},de={key:0,class:"material-icons text-[12px]"},ie={key:1,class:"material-icons text-[12px]"},ue={key:2,class:"material-icons text-[12px]"},pe={class:"py-2.5 px-3 text-[11px] text-gray-500 whitespace-nowrap"},xe={class:"py-2.5 px-3 text-[11px] text-right"},be={class:"inline-flex items-center gap-1"},me=["onClick"],ge=["onClick"],ye=["onClick"],fe=["onClick"],ce={key:0},ve={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},we={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},ke={class:"space-y-3 text-xs"},he={key:0,class:"mt-1 text-[10px] text-red-600"},_e={key:0,class:"mt-1 text-[10px] text-red-600"},Ce={key:0,class:"mt-1 text-[10px] text-red-600"},je={key:0,class:"mt-1 text-[10px] text-red-600"},Me={class:"flex justify-end gap-2 mt-5 text-[11px]"},Ue=["disabled"],Re={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},$e={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},Be={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},De={class:"text-[11px] text-gray-500 mb-3"},Se={class:"font-semibold"},Ve={class:"mb-4 text-xs"},Fe={class:"flex justify-end gap-2 text-[11px]"},Ne=["disabled"],ze={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Ae={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},Te={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Ee={class:"text-[11px] text-gray-500 mb-4"},Oe={class:"font-semibold"},Pe={class:"flex justify-end gap-2 text-[11px]"},Le=["disabled"],qe={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Ge={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},He={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Ie={class:"text-[11px] text-gray-500 mb-4"},Je={class:"font-semibold"},Ke={class:"flex justify-end gap-2 text-[11px]"},Qe=["disabled"],We={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Xe={key:4,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},Ye={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Ze={class:"text-[11px] text-gray-500 mb-4"},et={class:"font-semibold"},tt={class:"flex justify-end gap-2 text-[11px]"},st=["disabled"],ot={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},dt={__name:"Users",props:{users:{type:Array,default:()=>[]}},setup(h){const B=h,a=b(null),f=b(!1),c=b(!1),v=b(!1),w=b(!1),k=b(!1),l=g({name:"",email:"",password:"",role:"user"}),x=g({role:"user"}),_=g({}),C=g({}),j=g({}),D=()=>{l.reset(),l.role="user",f.value=!0},S=()=>{l.post(route("users.store"),{onSuccess:()=>{f.value=!1,l.reset()}})},V=p=>{a.value=p,x.role=p.role,c.value=!0},F=()=>{a.value&&x.patch(route("users.update-role",a.value.id),{onSuccess:()=>{c.value=!1}})},N=p=>{a.value=p,v.value=!0},z=()=>{a.value&&_.post(route("users.reset-password",a.value.id),{onSuccess:()=>{v.value=!1}})},A=p=>{a.value=p,w.value=!0},T=()=>{a.value&&C.post(route("users.ban",a.value.id),{onSuccess:()=>{w.value=!1}})},E=p=>{a.value=p,k.value=!0},O=()=>{a.value&&j.delete(route("users.destroy",a.value.id),{onSuccess:()=>{k.value=!1}})},P=L(()=>B.users.length);return(p,t)=>(n(),r(R,null,[U(o(q),{title:"Users & Roles"}),U(J,null,{default:G(()=>[e("div",K,[e("div",Q,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-lg font-semibold text-gray-900"},"Users & Roles"),e("p",{class:"text-[11px] text-gray-500 mt-1"},"Manage access to the Tanford console.")],-1)),e("div",W,[e("div",X,[t[10]||(t[10]=e("span",{class:"material-icons text-sm"},"group",-1)),e("span",Y,i(P.value),1),t[11]||(t[11]=e("span",{class:"text-emerald-800/80"},"users",-1))]),e("button",{type:"button",class:"inline-flex items-center gap-1 rounded-full bg-emerald-600 px-3 py-1.5 text-[11px] font-semibold text-white hover:bg-emerald-700",onClick:D},[...t[12]||(t[12]=[e("span",{class:"material-icons text-[13px]"},"person_add",-1),e("span",null,"New user",-1)])])])]),e("div",Z,[t[20]||(t[20]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-sm font-semibold text-gray-900"},"All users"),e("p",{class:"text-[11px] text-gray-500"},"Edit roles, reset passwords, or disable accounts.")],-1)),e("div",ee,[e("table",te,[t[19]||(t[19]=e("thead",null,[e("tr",{class:"border-b border-gray-100 text-[11px] text-gray-500"},[e("th",{class:"py-2 px-3 font-medium"},"Name"),e("th",{class:"py-2 px-3 font-medium"},"Email"),e("th",{class:"py-2 px-3 font-medium"},"Role"),e("th",{class:"py-2 px-3 font-medium"},"Created"),e("th",{class:"py-2 px-3 font-medium text-right"},"Actions")])],-1)),e("tbody",null,[(n(!0),r(R,null,H(h.users,s=>(n(),r("tr",{key:s.id,class:"border-b border-gray-50 hover:bg-gray-50/60"},[e("td",se,[e("div",oe,[e("span",le,i(s.name.split(" ").map(m=>m[0]).join("").slice(0,2).toUpperCase()),1),e("span",re,i(s.name),1)])]),e("td",ne,i(s.email),1),e("td",ae,[e("span",{class:I(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold capitalize",{"bg-emerald-50 text-emerald-700 border border-emerald-100":s.role==="admin","bg-gray-50 text-gray-700 border border-gray-200":s.role==="user","bg-red-50 text-red-600 border border-red-100":s.role==="banned"}])},[s.role==="admin"?(n(),r("span",de,"security")):s.role==="banned"?(n(),r("span",ie,"block")):(n(),r("span",ue,"person")),e("span",null,i(s.role),1)],2)]),e("td",pe,i(new Date(s.created_at).toLocaleDateString()),1),e("td",xe,[e("div",be,[e("button",{class:"px-2 py-1 rounded-full bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",onClick:m=>V(s)},[...t[14]||(t[14]=[e("span",{class:"material-icons text-[12px]"},"admin_panel_settings",-1),e("span",null,"Edit role",-1)])],8,me),e("button",{class:"px-2 py-1 rounded-full bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",onClick:m=>N(s)},[...t[15]||(t[15]=[e("span",{class:"material-icons text-[12px]"},"lock_reset",-1),e("span",null,"Reset",-1)])],8,ge),e("button",{class:"px-2 py-1 rounded-full bg-red-50 border border-red-100 text-red-600 hover:bg-red-100 flex items-center gap-1",onClick:m=>A(s)},[...t[16]||(t[16]=[e("span",{class:"material-icons text-[12px]"},"block",-1),e("span",null,"Ban",-1)])],8,ye),e("button",{class:"px-2 py-1 rounded-full bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 flex items-center gap-1",onClick:m=>E(s)},[...t[17]||(t[17]=[e("span",{class:"material-icons text-[12px]"},"delete",-1),e("span",null,"Delete",-1)])],8,fe)])])]))),128)),h.users.length?d("",!0):(n(),r("tr",ce,[...t[18]||(t[18]=[e("td",{colspan:"5",class:"py-6 text-center text-[11px] text-gray-500"}," No users found. ",-1)])]))])])])]),f.value?(n(),r("div",ve,[e("div",we,[t[27]||(t[27]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Create user",-1)),t[28]||(t[28]=e("p",{class:"text-[11px] text-gray-500 mb-3"},[u(" Add a new user and choose whether they are an "),e("span",{class:"font-semibold"},"admin"),u(" or regular "),e("span",{class:"font-semibold"},"user"),u(". ")],-1)),e("div",ke,[e("div",null,[t[21]||(t[21]=e("label",{class:"block mb-1 text-gray-700"},"Name",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o(l).name=s),type:"text",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[M,o(l).name]]),o(l).errors.name?(n(),r("p",he,i(o(l).errors.name),1)):d("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block mb-1 text-gray-700"},"Email",-1)),y(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o(l).email=s),type:"email",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},null,512),[[M,o(l).email]]),o(l).errors.email?(n(),r("p",_e,i(o(l).errors.email),1)):d("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block mb-1 text-gray-700"},"Password",-1)),y(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o(l).password=s),type:"password",class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500",placeholder:"Min 8 characters"},null,512),[[M,o(l).password]]),o(l).errors.password?(n(),r("p",Ce,i(o(l).errors.password),1)):d("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block mb-1 text-gray-700"},"Role",-1)),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(l).role=s),class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},[...t[24]||(t[24]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1)])],512),[[$,o(l).role]]),o(l).errors.role?(n(),r("p",je,i(o(l).errors.role),1)):d("",!0)])]),e("div",Me,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",type:"button",onClick:t[4]||(t[4]=s=>f.value=!1)}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",type:"button",disabled:o(l).processing,onClick:S},[o(l).processing?(n(),r("span",Re)):d("",!0),t[26]||(t[26]=e("span",null,"Create user",-1))],8,Ue)])])])):d("",!0),c.value&&a.value?(n(),r("div",$e,[e("div",Be,[t[34]||(t[34]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Update role",-1)),e("p",De,[t[29]||(t[29]=u(" Change the access level for ",-1)),e("span",Se,i(a.value.name),1),t[30]||(t[30]=u(". ",-1))]),e("div",Ve,[t[32]||(t[32]=e("label",{class:"block mb-1 text-gray-700"},"Role",-1)),y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(x).role=s),class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},[...t[31]||(t[31]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"banned"},"Banned",-1)])],512),[[$,o(x).role]])]),e("div",Fe,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[6]||(t[6]=s=>c.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",disabled:o(x).processing,type:"button",onClick:F},[o(x).processing?(n(),r("span",ze)):d("",!0),t[33]||(t[33]=e("span",null,"Save changes",-1))],8,Ne)])])])):d("",!0),v.value&&a.value?(n(),r("div",Ae,[e("div",Te,[t[40]||(t[40]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Reset password",-1)),e("p",Ee,[t[35]||(t[35]=u(" This will reset the password for ",-1)),e("span",Oe,i(a.value.email),1),t[36]||(t[36]=u(" to ",-1)),t[37]||(t[37]=e("code",null,"12345678",-1)),t[38]||(t[38]=u(". ",-1))]),e("div",Pe,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[7]||(t[7]=s=>v.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",disabled:o(_).processing,type:"button",onClick:z},[o(_).processing?(n(),r("span",qe)):d("",!0),t[39]||(t[39]=e("span",null,"Confirm reset",-1))],8,Le)])])])):d("",!0),w.value&&a.value?(n(),r("div",Ge,[e("div",He,[t[46]||(t[46]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Ban user",-1)),e("p",Ie,[t[41]||(t[41]=u(" This will set the role of ",-1)),e("span",Je,i(a.value.name),1),t[42]||(t[42]=u(" to ",-1)),t[43]||(t[43]=e("strong",null,"banned",-1)),t[44]||(t[44]=u(" and prevent login. ",-1))]),e("div",Ke,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[8]||(t[8]=s=>w.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-red-600 text-white text-xs font-semibold hover:bg-red-700 flex items-center gap-2",disabled:o(C).processing,type:"button",onClick:T},[o(C).processing?(n(),r("span",We)):d("",!0),t[45]||(t[45]=e("span",null,"Ban user",-1))],8,Qe)])])])):d("",!0),k.value&&a.value?(n(),r("div",Xe,[e("div",Ye,[t[50]||(t[50]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Delete user",-1)),e("p",Ze,[t[47]||(t[47]=u(" Are you sure you want to permanently delete ",-1)),e("span",et,i(a.value.name),1),t[48]||(t[48]=u("? This action cannot be undone. ",-1))]),e("div",tt,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[9]||(t[9]=s=>k.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-red-600 text-white text-xs font-semibold hover:bg-red-700 flex items-center gap-2",disabled:o(j).processing,type:"button",onClick:O},[o(j).processing?(n(),r("span",ot)):d("",!0),t[49]||(t[49]=e("span",null,"Delete",-1))],8,st)])])])):d("",!0)])]),_:1})],64))}};export{dt as default};
