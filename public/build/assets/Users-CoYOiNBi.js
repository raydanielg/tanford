import{r as b,u as y,d as N,c as l,a as k,e as r,h as A,w as T,f as e,j as p,t as a,o as n,F as C,l as V,s as E,n as d,i as O,m as L}from"./app-BXErnOJd.js";import{_ as P}from"./AuthenticatedLayout-UsPijtVE.js";import"./ApplicationLogo-DjCBDDtF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"space-y-6"},G={class:"bg-white rounded-2xl border border-gray-100 p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4"},H={class:"flex gap-3 text-[11px]"},I={class:"px-3 py-2 rounded-2xl bg-emerald-50 text-emerald-700 border border-emerald-100 flex items-center gap-2"},J={class:"font-semibold"},K={class:"bg-white rounded-2xl border border-gray-100 p-5"},Q={class:"overflow-x-auto"},W={class:"min-w-full text-xs text-left"},X={class:"py-2.5 px-3"},Y={class:"flex items-center gap-2"},Z={class:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-emerald-50 text-[11px] font-semibold text-emerald-700"},ee={class:"text-[12px] text-gray-900 font-medium"},te={class:"py-2.5 px-3 text-[11px] text-gray-600"},se={class:"py-2.5 px-3"},oe={key:0,class:"material-icons text-[12px]"},le={key:1,class:"material-icons text-[12px]"},ne={key:2,class:"material-icons text-[12px]"},re={class:"py-2.5 px-3 text-[11px] text-gray-500 whitespace-nowrap"},ae={class:"py-2.5 px-3 text-[11px] text-right"},de={class:"inline-flex items-center gap-1"},ie=["onClick"],pe=["onClick"],ue=["onClick"],xe=["onClick"],be={key:0},me={key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},ge={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},ce={class:"text-[11px] text-gray-500 mb-3"},fe={class:"font-semibold"},ye={class:"mb-4 text-xs"},ve={class:"flex justify-end gap-2 text-[11px]"},we=["disabled"],he={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},_e={key:1,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},ke={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Ce={class:"text-[11px] text-gray-500 mb-4"},je={class:"font-semibold"},Me={class:"flex justify-end gap-2 text-[11px]"},Be=["disabled"],De={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Re={key:2,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},$e={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Se={class:"text-[11px] text-gray-500 mb-4"},Ue={class:"font-semibold"},Fe={class:"flex justify-end gap-2 text-[11px]"},ze=["disabled"],Ne={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Ae={key:3,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/40"},Te={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm p-5"},Ve={class:"text-[11px] text-gray-500 mb-4"},Ee={class:"font-semibold"},Oe={class:"flex justify-end gap-2 text-[11px]"},Le=["disabled"],Pe={key:0,class:"w-3 h-3 border-2 border-white/70 border-t-transparent rounded-full animate-spin"},Je={__name:"Users",props:{users:{type:Array,default:()=>[]}},setup(v){const j=v,o=b(null),m=b(!1),g=b(!1),c=b(!1),f=b(!1),u=y({role:"user"}),w=y({}),h=y({}),_=y({}),M=i=>{o.value=i,u.role=i.role,m.value=!0},B=()=>{o.value&&u.patch(route("users.update-role",o.value.id),{onSuccess:()=>{m.value=!1}})},D=i=>{o.value=i,g.value=!0},R=()=>{o.value&&w.post(route("users.reset-password",o.value.id),{onSuccess:()=>{g.value=!1}})},$=i=>{o.value=i,c.value=!0},S=()=>{o.value&&h.post(route("users.ban",o.value.id),{onSuccess:()=>{c.value=!1}})},U=i=>{o.value=i,f.value=!0},F=()=>{o.value&&_.delete(route("users.destroy",o.value.id),{onSuccess:()=>{f.value=!1}})},z=N(()=>j.users.length);return(i,t)=>(n(),l(C,null,[k(r(A),{title:"Users & Roles"}),k(P,null,{default:T(()=>[e("div",q,[e("div",G,[t[7]||(t[7]=e("div",null,[e("h1",{class:"text-lg font-semibold text-gray-900"},"Users & Roles"),e("p",{class:"text-[11px] text-gray-500 mt-1"},"Manage access to the Tanford console.")],-1)),e("div",H,[e("div",I,[t[5]||(t[5]=e("span",{class:"material-icons text-sm"},"group",-1)),e("span",J,a(z.value),1),t[6]||(t[6]=e("span",{class:"text-emerald-800/80"},"users",-1))])])]),e("div",K,[t[14]||(t[14]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"text-sm font-semibold text-gray-900"},"All users"),e("p",{class:"text-[11px] text-gray-500"},"Edit roles, reset passwords, or disable accounts.")],-1)),e("div",Q,[e("table",W,[t[13]||(t[13]=e("thead",null,[e("tr",{class:"border-b border-gray-100 text-[11px] text-gray-500"},[e("th",{class:"py-2 px-3 font-medium"},"Name"),e("th",{class:"py-2 px-3 font-medium"},"Email"),e("th",{class:"py-2 px-3 font-medium"},"Role"),e("th",{class:"py-2 px-3 font-medium"},"Created"),e("th",{class:"py-2 px-3 font-medium text-right"},"Actions")])],-1)),e("tbody",null,[(n(!0),l(C,null,V(v.users,s=>(n(),l("tr",{key:s.id,class:"border-b border-gray-50 hover:bg-gray-50/60"},[e("td",X,[e("div",Y,[e("span",Z,a(s.name.split(" ").map(x=>x[0]).join("").slice(0,2).toUpperCase()),1),e("span",ee,a(s.name),1)])]),e("td",te,a(s.email),1),e("td",se,[e("span",{class:E(["inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold capitalize",{"bg-emerald-50 text-emerald-700 border border-emerald-100":s.role==="admin","bg-gray-50 text-gray-700 border border-gray-200":s.role==="user","bg-red-50 text-red-600 border border-red-100":s.role==="banned"}])},[s.role==="admin"?(n(),l("span",oe,"security")):s.role==="banned"?(n(),l("span",le,"block")):(n(),l("span",ne,"person")),e("span",null,a(s.role),1)],2)]),e("td",re,a(new Date(s.created_at).toLocaleDateString()),1),e("td",ae,[e("div",de,[e("button",{class:"px-2 py-1 rounded-full bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",onClick:x=>M(s)},[...t[8]||(t[8]=[e("span",{class:"material-icons text-[12px]"},"admin_panel_settings",-1),e("span",null,"Edit role",-1)])],8,ie),e("button",{class:"px-2 py-1 rounded-full bg-gray-50 border border-gray-200 text-gray-700 hover:bg-gray-100 flex items-center gap-1",onClick:x=>D(s)},[...t[9]||(t[9]=[e("span",{class:"material-icons text-[12px]"},"lock_reset",-1),e("span",null,"Reset",-1)])],8,pe),e("button",{class:"px-2 py-1 rounded-full bg-red-50 border border-red-100 text-red-600 hover:bg-red-100 flex items-center gap-1",onClick:x=>$(s)},[...t[10]||(t[10]=[e("span",{class:"material-icons text-[12px]"},"block",-1),e("span",null,"Ban",-1)])],8,ue),e("button",{class:"px-2 py-1 rounded-full bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 flex items-center gap-1",onClick:x=>U(s)},[...t[11]||(t[11]=[e("span",{class:"material-icons text-[12px]"},"delete",-1),e("span",null,"Delete",-1)])],8,xe)])])]))),128)),v.users.length?p("",!0):(n(),l("tr",be,[...t[12]||(t[12]=[e("td",{colspan:"5",class:"py-6 text-center text-[11px] text-gray-500"}," No users found. ",-1)])]))])])])]),m.value&&o.value?(n(),l("div",me,[e("div",ge,[t[20]||(t[20]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Update role",-1)),e("p",ce,[t[15]||(t[15]=d(" Change the access level for ",-1)),e("span",fe,a(o.value.name),1),t[16]||(t[16]=d(". ",-1))]),e("div",ye,[t[18]||(t[18]=e("label",{class:"block mb-1 text-gray-700"},"Role",-1)),O(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(u).role=s),class:"w-full border border-gray-300 rounded-lg px-2 py-1.5 text-xs focus:border-emerald-500 focus:ring-emerald-500"},[...t[17]||(t[17]=[e("option",{value:"user"},"User",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"banned"},"Banned",-1)])],512),[[L,r(u).role]])]),e("div",ve,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[1]||(t[1]=s=>m.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",disabled:r(u).processing,type:"button",onClick:B},[r(u).processing?(n(),l("span",he)):p("",!0),t[19]||(t[19]=e("span",null,"Save changes",-1))],8,we)])])])):p("",!0),g.value&&o.value?(n(),l("div",_e,[e("div",ke,[t[26]||(t[26]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Reset password",-1)),e("p",Ce,[t[21]||(t[21]=d(" This will reset the password for ",-1)),e("span",je,a(o.value.email),1),t[22]||(t[22]=d(" to ",-1)),t[23]||(t[23]=e("code",null,"12345678",-1)),t[24]||(t[24]=d(". ",-1))]),e("div",Me,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[2]||(t[2]=s=>g.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700 flex items-center gap-2",disabled:r(w).processing,type:"button",onClick:R},[r(w).processing?(n(),l("span",De)):p("",!0),t[25]||(t[25]=e("span",null,"Confirm reset",-1))],8,Be)])])])):p("",!0),c.value&&o.value?(n(),l("div",Re,[e("div",$e,[t[32]||(t[32]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Ban user",-1)),e("p",Se,[t[27]||(t[27]=d(" This will set the role of ",-1)),e("span",Ue,a(o.value.name),1),t[28]||(t[28]=d(" to ",-1)),t[29]||(t[29]=e("strong",null,"banned",-1)),t[30]||(t[30]=d(" and prevent login. ",-1))]),e("div",Fe,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[3]||(t[3]=s=>c.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-red-600 text-white text-xs font-semibold hover:bg-red-700 flex items-center gap-2",disabled:r(h).processing,type:"button",onClick:S},[r(h).processing?(n(),l("span",Ne)):p("",!0),t[31]||(t[31]=e("span",null,"Ban user",-1))],8,ze)])])])):p("",!0),f.value&&o.value?(n(),l("div",Ae,[e("div",Te,[t[36]||(t[36]=e("h3",{class:"text-sm font-semibold text-gray-900 mb-2"},"Delete user",-1)),e("p",Ve,[t[33]||(t[33]=d(" Are you sure you want to permanently delete ",-1)),e("span",Ee,a(o.value.name),1),t[34]||(t[34]=d("? This action cannot be undone. ",-1))]),e("div",Oe,[e("button",{class:"px-3 py-1.5 rounded-full bg-gray-50 border border-gray-200 text-gray-600 hover:bg-gray-100",onClick:t[4]||(t[4]=s=>f.value=!1),type:"button"}," Cancel "),e("button",{class:"px-3 py-1.5 rounded-full bg-red-600 text-white text-xs font-semibold hover:bg-red-700 flex items-center gap-2",disabled:r(_).processing,type:"button",onClick:F},[r(_).processing?(n(),l("span",Pe)):p("",!0),t[35]||(t[35]=e("span",null,"Delete",-1))],8,Le)])])])):p("",!0)])]),_:1})],64))}};export{Je as default};
